2023-02-24 09:15:36.462 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Start installing Hangfire SQL objects...
2023-02-24 09:15:36.501 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Hangfire SQL objects installed.
2023-02-24 09:15:36.838 +07:00 [Information] (Hangfire.BackgroundJobServer.) Starting Hangfire Server using job storage: 'SQL Server: 192.168.85.11@BO_GOLF1'
2023-02-24 09:15:36.838 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for SQL Server job storage: Queue poll interval: 00:00:15.
2023-02-24 09:15:36.839 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2023-02-24 09:15:36.880 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop BackgroundServerProcess:b1026e1a has started in 24.4528 ms
2023-02-24 09:15:36.927 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:23888:b030f386 successfully announced in 44.2854 ms
2023-02-24 09:15:36.933 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerHeartbeatProcess:fcdfaf1a has started in 4.8832 ms
2023-02-24 09:15:36.934 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:23888:b030f386 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2023-02-24 09:15:36.942 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerWatchdog:30508779 has started in 8.1245 ms
2023-02-24 09:15:36.945 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerJobCancellationWatcher:34c2e47c has started in 9.0386 ms
2023-02-24 09:15:36.950 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ExpirationManager:b9090bb7 has started in 5.7809 ms
2023-02-24 09:15:36.954 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop CountersAggregator:e9098756 has started in 6.641 ms
2023-02-24 09:15:36.961 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 09:15:36.961 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop SqlServerHeartbeatProcess:fbf6835e has started in 10.4931 ms
2023-02-24 09:15:36.961 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 09:15:36.979 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:95699f38 has started in 25.277 ms
2023-02-24 09:15:36.979 +07:00 [Information] (Hangfire.Server.ServerWatchdog.) 1 servers were removed due to timeout
2023-02-24 09:15:36.985 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:a3af752d has started in 31.3194 ms
2023-02-24 09:15:36.992 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:e3ef7479 has started in 38.1783 ms
2023-02-24 09:15:36.996 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:bd5112a3 has started in 42.6461 ms
2023-02-24 09:15:37.028 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:89c656f7 has started in 74.5447 ms
2023-02-24 09:15:37.028 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:9ce91629 has started in 74.2622 ms
2023-02-24 09:15:37.031 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 09:15:37.041 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:c4066eb8 has started in 87.6879 ms
2023-02-24 09:15:37.049 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 09:15:37.061 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:0e3f0e50 has started in 107.8533 ms
2023-02-24 09:15:37.066 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:d00b5d02 has started in 112.7614 ms
2023-02-24 09:15:37.071 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:eecb691d has started in 117.1464 ms
2023-02-24 09:15:37.079 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:3b7c7475 has started in 125.5524 ms
2023-02-24 09:15:37.121 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:ffe5feb6 has started in 167.3795 ms
2023-02-24 09:15:37.121 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:c37bf86d has started in 167.9474 ms
2023-02-24 09:15:37.133 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:a0ca1e67 has started in 178.0296 ms
2023-02-24 09:15:37.134 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 09:15:37.138 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:1b15f75a has started in 184.9181 ms
2023-02-24 09:15:37.146 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:c5b6add7 has started in 192.2735 ms
2023-02-24 09:15:37.151 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:5d589e0c has started in 197.2967 ms
2023-02-24 09:15:37.155 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:9707d9af has started in 200.7818 ms
2023-02-24 09:15:37.161 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:baf1dbb2 has started in 207.3132 ms
2023-02-24 09:15:37.165 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:d393217a has started in 211.7912 ms
2023-02-24 09:15:37.169 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:23888:b030f386 all the dispatchers started
2023-02-24 09:15:37.169 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop DelayedJobScheduler:81f83a3e has started in 8.4346 ms
2023-02-24 09:15:37.175 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop RecurringJobScheduler:c3a1f8c9 has started in 10.1832 ms
2023-02-24 09:15:37.178 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 09:15:37.313 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 09:15:37.409 +07:00 [Debug] (Hangfire.Server.RecurringJobScheduler.) 1 recurring job(s) processed by scheduler.
2023-02-24 09:15:40.592 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2023-02-24 09:15:40.713 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"NonRefundedFee"' on entity type '"Booking"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.713 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalEstimateFee"' on entity type '"Booking"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.714 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"BuggyFee"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.714 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"EstimatedPrice"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.714 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"NonRefundedFee"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.714 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"SeagolfPrice"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.714 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"OutMoneyAcc"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.714 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"SdkRefundMoney"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.714 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoney"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.714 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoneyAcc"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.714 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Charge_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.716 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Tien_hoan"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.716 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Total_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.716 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Trans_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.716 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Charge_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.716 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Tien_hoan"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.716 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoneyAcc"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.716 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Total_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.716 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Trans_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 09:15:40.962 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 09:15:40.962 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 09:15:40.962 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 09:15:42.404 +07:00 [Error] (App.BookingOnline.WebApi.Jobs.SendEmailJobs.MoveNext) logAccountCustomer
2023-02-24 09:15:43.145 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:15:43.235 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("9"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:15:42.8755460+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:15:43.274 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:15:43.376 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:43.429 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:15:43.699 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:15:43.717 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:15:42.8755460+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:15:43.721 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:15:43.752 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:43.752 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:15:43.996 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:15:44.007 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:15:44.016 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:15:43.7545125+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:15:44.018 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9021b911-c676-455a-be83-3b07c27f9310
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9021b911-c676-455a-be83-3b07c27f9310
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:15:44.048 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:44.048 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("31"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:15:42.8755460+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:15:44.048 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:15:44.050 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:15:44.081 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:44.082 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:15:44.082 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 09:15:44.089 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 09:15:44.095 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 09:15:44.106 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("8"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:15:42.8755460+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T09:15:43.4297732+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T09:15:43.7526381+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p47='14b44c5c-bc22-4693-857a-81d4def7d86f', @p45='sent' (Nullable = false) (Size = 100), @p46='2023-02-24T09:15:44.0823074+07:00' (Nullable = true), @p50='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p48='sent' (Nullable = false) (Size = 100), @p49='2023-02-24T09:15:44.0823076+07:00' (Nullable = true), @p53='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p51='sent' (Nullable = false) (Size = 100), @p52='2023-02-24T09:15:44.0823061+07:00' (Nullable = true), @p56='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p54='sent' (Nullable = false) (Size = 100), @p55='2023-02-24T09:15:44.0823077+07:00' (Nullable = true), @p63='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p57='2023-02-21T14:31:21.6236083', @p58='system' (Nullable = false) (Size = 500), @p59='2023-02-20T00:00:00.0000000', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T09:15:44.0937240+07:00' (Nullable = true), @p62=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p45, [UpdatedDate] = @p46
WHERE [Id] = @p47;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p48, [UpdatedDate] = @p49
WHERE [Id] = @p50;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p51, [UpdatedDate] = @p52
WHERE [Id] = @p53;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p54, [UpdatedDate] = @p55
WHERE [Id] = @p56;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p57, [CreatedUser] = @p58, [Date] = @p59, [Status] = @p60, [UpdatedDate] = @p61, [UpdatedUser] = @p62
WHERE [Id] = @p63;
SELECT @@ROWCOUNT;"
2023-02-24 09:15:44.107 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:15:44.126 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:44.142 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:44.158 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:44.327 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:15:44.344 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:15:43.7545125+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:15:44.349 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:15:44.380 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:44.381 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:15:44.642 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:15:44.660 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:15:43.7545125+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:15:44.663 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:15:44.693 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:44.693 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:15:44.693 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 09:15:44.693 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 09:15:44.696 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 09:15:44.702 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:15:43.7545125+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T09:15:44.0487201+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T09:15:44.3810897+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p47='14b44c5c-bc22-4693-857a-81d4def7d86f', @p45='sent' (Nullable = false) (Size = 100), @p46='2023-02-24T09:15:44.6937489+07:00' (Nullable = true), @p50='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p48='sent' (Nullable = false) (Size = 100), @p49='2023-02-24T09:15:44.6937492+07:00' (Nullable = true), @p53='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p51='sent' (Nullable = false) (Size = 100), @p52='2023-02-24T09:15:44.6937487+07:00' (Nullable = true), @p56='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p54='sent' (Nullable = false) (Size = 100), @p55='2023-02-24T09:15:44.6937494+07:00' (Nullable = true), @p63='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p57='2023-02-21T14:31:21.6236083', @p58='system' (Nullable = false) (Size = 500), @p59='2023-02-20T00:00:00.0000000', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T09:15:44.6956633+07:00' (Nullable = true), @p62=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p45, [UpdatedDate] = @p46
WHERE [Id] = @p47;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p48, [UpdatedDate] = @p49
WHERE [Id] = @p50;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p51, [UpdatedDate] = @p52
WHERE [Id] = @p53;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p54, [UpdatedDate] = @p55
WHERE [Id] = @p56;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p57, [CreatedUser] = @p58, [Date] = @p59, [Status] = @p60, [UpdatedDate] = @p61, [UpdatedUser] = @p62
WHERE [Id] = @p63;
SELECT @@ROWCOUNT;"
2023-02-24 09:15:44.703 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:15:44.721 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:44.737 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:15:44.753 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:16:06.992 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:23888:b030f386 heartbeat successfully sent
2023-02-24 09:16:07.398 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 09:16:07.436 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 09:16:08.141 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:16:08.162 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("8"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:16:07.8910355+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:16:08.180 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:16:08.211 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:16:08.212 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:16:08.469 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:16:08.491 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:16:07.8910355+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:16:08.494 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:16:08.526 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:16:08.526 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:16:09.091 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:16:09.120 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("14"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:16:07.8910355+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:16:09.132 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:16:09.163 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:16:09.163 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:16:09.164 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 09:16:09.164 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 09:16:09.177 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 09:16:09.189 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("10"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:16:07.8910355+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T09:16:08.2126913+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T09:16:08.5268700+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p47='14b44c5c-bc22-4693-857a-81d4def7d86f', @p45='sent' (Nullable = false) (Size = 100), @p46='2023-02-24T09:16:09.1639493+07:00' (Nullable = true), @p50='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p48='sent' (Nullable = false) (Size = 100), @p49='2023-02-24T09:16:09.1639524+07:00' (Nullable = true), @p53='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p51='sent' (Nullable = false) (Size = 100), @p52='2023-02-24T09:16:09.1639320+07:00' (Nullable = true), @p56='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p54='sent' (Nullable = false) (Size = 100), @p55='2023-02-24T09:16:09.1639550+07:00' (Nullable = true), @p63='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p57='2023-02-21T14:31:21.6236083', @p58='system' (Nullable = false) (Size = 500), @p59='2023-02-20T00:00:00.0000000', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T09:16:09.1770489+07:00' (Nullable = true), @p62=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p45, [UpdatedDate] = @p46
WHERE [Id] = @p47;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p48, [UpdatedDate] = @p49
WHERE [Id] = @p50;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p51, [UpdatedDate] = @p52
WHERE [Id] = @p53;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p54, [UpdatedDate] = @p55
WHERE [Id] = @p56;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p57, [CreatedUser] = @p58, [Date] = @p59, [Status] = @p60, [UpdatedDate] = @p61, [UpdatedUser] = @p62
WHERE [Id] = @p63;
SELECT @@ROWCOUNT;"
2023-02-24 09:16:09.190 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:16:09.213 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:16:09.229 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:16:09.246 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:16:37.013 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:23888:b030f386 heartbeat successfully sent
2023-02-24 09:17:07.032 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:23888:b030f386 heartbeat successfully sent
2023-02-24 09:17:07.514 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 09:17:07.546 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 09:17:09.493 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:17:09.508 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:17:09.2484327+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:17:09.511 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:17:09.544 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:17:09.545 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:17:09.788 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:17:09.801 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:17:09.2484327+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:17:09.802 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:17:09.832 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:17:09.832 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:17:10.093 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:17:10.108 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:17:09.2484327+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:17:10.110 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:17:10.139 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:17:10.139 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:17:10.139 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 09:17:10.140 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 09:17:10.142 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 09:17:10.149 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:17:09.2484327+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T09:17:09.5455383+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T09:17:09.8325805+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p47='14b44c5c-bc22-4693-857a-81d4def7d86f', @p45='sent' (Nullable = false) (Size = 100), @p46='2023-02-24T09:17:10.1397803+07:00' (Nullable = true), @p50='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p48='sent' (Nullable = false) (Size = 100), @p49='2023-02-24T09:17:10.1397808+07:00' (Nullable = true), @p53='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p51='sent' (Nullable = false) (Size = 100), @p52='2023-02-24T09:17:10.1397796+07:00' (Nullable = true), @p56='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p54='sent' (Nullable = false) (Size = 100), @p55='2023-02-24T09:17:10.1397813+07:00' (Nullable = true), @p63='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p57='2023-02-21T14:31:21.6236083', @p58='system' (Nullable = false) (Size = 500), @p59='2023-02-20T00:00:00.0000000', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T09:17:10.1414789+07:00' (Nullable = true), @p62=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p45, [UpdatedDate] = @p46
WHERE [Id] = @p47;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p48, [UpdatedDate] = @p49
WHERE [Id] = @p50;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p51, [UpdatedDate] = @p52
WHERE [Id] = @p53;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p54, [UpdatedDate] = @p55
WHERE [Id] = @p56;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p57, [CreatedUser] = @p58, [Date] = @p59, [Status] = @p60, [UpdatedDate] = @p61, [UpdatedUser] = @p62
WHERE [Id] = @p63;
SELECT @@ROWCOUNT;"
2023-02-24 09:17:10.150 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:17:10.167 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:17:10.182 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:17:10.198 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:17:37.055 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:23888:b030f386 heartbeat successfully sent
2023-02-24 09:18:07.082 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:23888:b030f386 heartbeat successfully sent
2023-02-24 09:18:22.613 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 09:18:22.641 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 09:18:23.358 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:18:23.374 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:18:23.1076037+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:18:23.376 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:18:23.410 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:18:23.410 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:18:23.658 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:18:23.672 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:18:23.1076037+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:18:23.674 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:18:23.703 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:18:23.704 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:18:25.024 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 09:18:25.040 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:18:23.1076037+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 09:18:25.041 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:18:25.071 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:18:25.071 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 09:18:25.071 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 09:18:25.072 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 09:18:25.073 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 09:18:25.079 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T09:18:23.1076037+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T09:18:23.4106682+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T09:18:23.7042223+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p47='14b44c5c-bc22-4693-857a-81d4def7d86f', @p45='sent' (Nullable = false) (Size = 100), @p46='2023-02-24T09:18:25.0719745+07:00' (Nullable = true), @p50='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p48='sent' (Nullable = false) (Size = 100), @p49='2023-02-24T09:18:25.0719747+07:00' (Nullable = true), @p53='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p51='sent' (Nullable = false) (Size = 100), @p52='2023-02-24T09:18:25.0719743+07:00' (Nullable = true), @p56='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p54='sent' (Nullable = false) (Size = 100), @p55='2023-02-24T09:18:25.0719749+07:00' (Nullable = true), @p63='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p57='2023-02-21T14:31:21.6236083', @p58='system' (Nullable = false) (Size = 500), @p59='2023-02-20T00:00:00.0000000', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T09:18:25.0733049+07:00' (Nullable = true), @p62=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p45, [UpdatedDate] = @p46
WHERE [Id] = @p47;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p48, [UpdatedDate] = @p49
WHERE [Id] = @p50;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p51, [UpdatedDate] = @p52
WHERE [Id] = @p53;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p54, [UpdatedDate] = @p55
WHERE [Id] = @p56;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p57, [CreatedUser] = @p58, [Date] = @p59, [Status] = @p60, [UpdatedDate] = @p61, [UpdatedUser] = @p62
WHERE [Id] = @p63;
SELECT @@ROWCOUNT;"
2023-02-24 09:18:25.080 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:f8aa8344-11e1-4266-9ea2-73c49223d894
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 09:18:25.096 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:18:25.111 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:18:25.126 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 09:18:37.096 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:23888:b030f386 heartbeat successfully sent
2023-02-24 09:18:45.393 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 09:18:55.697 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 09:18:59.579 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 09:19:08.056 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:23888:b030f386 heartbeat successfully sent
2023-02-24 10:20:47.767 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Start installing Hangfire SQL objects...
2023-02-24 10:20:48.002 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Hangfire SQL objects installed.
2023-02-24 10:20:48.123 +07:00 [Information] (Hangfire.BackgroundJobServer.) Starting Hangfire Server using job storage: 'SQL Server: 192.168.85.11@BO_GOLF1'
2023-02-24 10:20:48.123 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for SQL Server job storage: Queue poll interval: 00:00:15.
2023-02-24 10:20:48.124 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2023-02-24 10:20:48.143 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop BackgroundServerProcess:284f7d52 has started in 14.7555 ms
2023-02-24 10:20:48.200 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:9252:c0049cb5 successfully announced in 54.8462 ms
2023-02-24 10:20:48.348 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerHeartbeatProcess:425b8f6b has started in 146.7877 ms
2023-02-24 10:20:48.349 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:9252:c0049cb5 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2023-02-24 10:20:48.386 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerWatchdog:7faf1a48 has started in 36.9502 ms
2023-02-24 10:20:48.405 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerJobCancellationWatcher:f0890ccc has started in 18.8887 ms
2023-02-24 10:20:48.419 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ExpirationManager:e0ee791d has started in 20.0863 ms
2023-02-24 10:20:48.459 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop CountersAggregator:1f5089dd has started in 47.5302 ms
2023-02-24 10:20:48.459 +07:00 [Information] (Hangfire.Server.ServerWatchdog.) 1 servers were removed due to timeout
2023-02-24 10:20:48.459 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop SqlServerHeartbeatProcess:3e263e84 has started in 39.5787 ms
2023-02-24 10:20:48.459 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 10:20:48.460 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 10:20:48.463 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:6a6acd97 has started in 32.1274 ms
2023-02-24 10:20:48.466 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:1a5c0fac has started in 34.9826 ms
2023-02-24 10:20:48.468 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:7190d5d9 has started in 37.5318 ms
2023-02-24 10:20:48.471 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:adcb0929 has started in 40.6603 ms
2023-02-24 10:20:48.475 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:a0730eaa has started in 44.5304 ms
2023-02-24 10:20:48.478 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:ca7baa2d has started in 47.6329 ms
2023-02-24 10:20:48.481 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:96a450b7 has started in 50.4433 ms
2023-02-24 10:20:48.484 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:8cdcce8d has started in 53.1445 ms
2023-02-24 10:20:48.489 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:4d3080fe has started in 58.615 ms
2023-02-24 10:20:48.520 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:f76c9fbb has started in 89.6231 ms
2023-02-24 10:20:48.520 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:bf51da2a has started in 89.8235 ms
2023-02-24 10:20:48.525 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 10:20:48.536 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:58c9751d has started in 104.9451 ms
2023-02-24 10:20:48.565 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:de2e2037 has started in 134.0468 ms
2023-02-24 10:20:48.565 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:e30b0d88 has started in 134.0441 ms
2023-02-24 10:20:48.570 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:fa69ac27 has started in 138.9988 ms
2023-02-24 10:20:48.574 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:b719ba22 has started in 142.929 ms
2023-02-24 10:20:48.577 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 10:20:48.577 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:10584d09 has started in 146.2763 ms
2023-02-24 10:20:48.582 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:6f06fc71 has started in 150.8325 ms
2023-02-24 10:20:48.584 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:55ccdf52 has started in 153.1054 ms
2023-02-24 10:20:48.587 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:66dc9072 has started in 156.183 ms
2023-02-24 10:20:48.592 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:9252:c0049cb5 all the dispatchers started
2023-02-24 10:20:48.593 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop DelayedJobScheduler:9f42d47f has started in 8.9812 ms
2023-02-24 10:20:48.596 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 10:20:48.596 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop RecurringJobScheduler:069c220f has started in 7.6574 ms
2023-02-24 10:20:48.639 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 10:20:48.800 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 10:20:48.846 +07:00 [Debug] (Hangfire.Server.RecurringJobScheduler.) 1 recurring job(s) processed by scheduler.
2023-02-24 10:20:51.589 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2023-02-24 10:20:52.128 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"NonRefundedFee"' on entity type '"Booking"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.129 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalEstimateFee"' on entity type '"Booking"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.130 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"BuggyFee"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.130 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"EstimatedPrice"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.130 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"NonRefundedFee"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.130 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"SeagolfPrice"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.130 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"OutMoneyAcc"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.130 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"SdkRefundMoney"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.130 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoney"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.130 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoneyAcc"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.131 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Charge_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.131 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Tien_hoan"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.131 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Total_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.134 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Trans_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.134 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Charge_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.134 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Tien_hoan"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.134 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoneyAcc"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.134 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Total_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.134 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Trans_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:20:52.385 +07:00 [Error] (App.BookingOnline.WebApi.Jobs.GetFileInSeabankJobs.MoveNext) GetFileInFromSbAsync
2023-02-24 10:20:52.387 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 10:20:52.387 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 10:23:08.194 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:9252:c0049cb5 heartbeat successfully sent
2023-02-24 10:23:10.204 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 10:23:10.210 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 10:23:10.272 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("8"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:23:09.8326071+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 10:23:10.272 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("8"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:23:09.8326071+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 10:23:10.411 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:64de903b-7452-4e22-aceb-cdaeb3bef5dc
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:64de903b-7452-4e22-aceb-cdaeb3bef5dc
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:23:10.411 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:efce7c03-97cc-4eb8-a952-1c8253a4a84c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:efce7c03-97cc-4eb8-a952-1c8253a4a84c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:23:10.519 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:10.519 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:10.745 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 10:23:10.745 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 10:23:10.989 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 10:23:11.006 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 10:23:11.025 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:23:09.8326071+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 10:23:11.025 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:23:09.8326071+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 10:23:11.028 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:efce7c03-97cc-4eb8-a952-1c8253a4a84c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:efce7c03-97cc-4eb8-a952-1c8253a4a84c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:23:11.028 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:64de903b-7452-4e22-aceb-cdaeb3bef5dc
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:64de903b-7452-4e22-aceb-cdaeb3bef5dc
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:23:11.081 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:11.087 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:11.087 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 10:23:11.087 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 10:23:11.246 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 10:23:11.338 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 10:23:11.353 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 10:23:11.362 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:23:09.8326071+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 10:23:11.363 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 10:23:11.366 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:64de903b-7452-4e22-aceb-cdaeb3bef5dc
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:64de903b-7452-4e22-aceb-cdaeb3bef5dc
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:23:11.399 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:11.399 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("38"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:23:09.8326071+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 10:23:11.400 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 10:23:11.400 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 10:23:11.402 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:aeb38042-93ee-4f2e-a2e7-04a99b2f6722
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:aeb38042-93ee-4f2e-a2e7-04a99b2f6722
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:23:11.437 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:11.438 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 10:23:11.438 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 10:23:11.438 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 10:23:11.438 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 10:23:11.442 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 10:23:11.442 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 10:23:11.457 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("11"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:23:09.8326071+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T10:23:10.7454562+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T10:23:11.0875490+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p47='14b44c5c-bc22-4693-857a-81d4def7d86f', @p45='sent' (Nullable = false) (Size = 100), @p46='2023-02-24T10:23:11.4005811+07:00' (Nullable = true), @p50='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p48='sent' (Nullable = false) (Size = 100), @p49='2023-02-24T10:23:11.4005814+07:00' (Nullable = true), @p53='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p51='sent' (Nullable = false) (Size = 100), @p52='2023-02-24T10:23:11.4005798+07:00' (Nullable = true), @p56='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p54='sent' (Nullable = false) (Size = 100), @p55='2023-02-24T10:23:11.4005816+07:00' (Nullable = true), @p63='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p57='2023-02-21T14:31:21.6236083', @p58='system' (Nullable = false) (Size = 500), @p59='2023-02-20T00:00:00.0000000', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T10:23:11.4402437+07:00' (Nullable = true), @p62=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p45, [UpdatedDate] = @p46
WHERE [Id] = @p47;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p48, [UpdatedDate] = @p49
WHERE [Id] = @p50;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p51, [UpdatedDate] = @p52
WHERE [Id] = @p53;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p54, [UpdatedDate] = @p55
WHERE [Id] = @p56;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p57, [CreatedUser] = @p58, [Date] = @p59, [Status] = @p60, [UpdatedDate] = @p61, [UpdatedUser] = @p62
WHERE [Id] = @p63;
SELECT @@ROWCOUNT;"
2023-02-24 10:23:11.458 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:aeb38042-93ee-4f2e-a2e7-04a99b2f6722
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:aeb38042-93ee-4f2e-a2e7-04a99b2f6722
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:23:11.475 +07:00 [Error] (App.BookingOnline.WebApi.Jobs.GetFileInSeabankJobs.MoveNext) SendFileOutToSbAsync
2023-02-24 10:23:11.478 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:11.494 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:11.495 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("49"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:23:09.8326071+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T10:23:10.7454631+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T10:23:11.0876230+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p47='14b44c5c-bc22-4693-857a-81d4def7d86f', @p45='sent' (Nullable = false) (Size = 100), @p46='2023-02-24T10:23:11.4383097+07:00' (Nullable = true), @p50='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p48='sent' (Nullable = false) (Size = 100), @p49='2023-02-24T10:23:11.4383099+07:00' (Nullable = true), @p53='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p51='sent' (Nullable = false) (Size = 100), @p52='2023-02-24T10:23:11.4383094+07:00' (Nullable = true), @p56='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p54='sent' (Nullable = false) (Size = 100), @p55='2023-02-24T10:23:11.4383101+07:00' (Nullable = true), @p63='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p57='2023-02-21T14:31:21.6236083', @p58='system' (Nullable = false) (Size = 500), @p59='2023-02-20T00:00:00.0000000', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T10:23:11.4404656+07:00' (Nullable = true), @p62=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p45, [UpdatedDate] = @p46
WHERE [Id] = @p47;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p48, [UpdatedDate] = @p49
WHERE [Id] = @p50;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p51, [UpdatedDate] = @p52
WHERE [Id] = @p53;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p54, [UpdatedDate] = @p55
WHERE [Id] = @p56;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p57, [CreatedUser] = @p58, [Date] = @p59, [Status] = @p60, [UpdatedDate] = @p61, [UpdatedUser] = @p62
WHERE [Id] = @p63;
SELECT @@ROWCOUNT;"
2023-02-24 10:23:11.511 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:11.520 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:efce7c03-97cc-4eb8-a952-1c8253a4a84c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:efce7c03-97cc-4eb8-a952-1c8253a4a84c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:23:11.590 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:11.607 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:11.624 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:23:38.223 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:9252:c0049cb5 heartbeat successfully sent
2023-02-24 10:23:50.501 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 10:24:08.234 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:9252:c0049cb5 heartbeat successfully sent
2023-02-24 10:24:38.262 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:9252:c0049cb5 heartbeat successfully sent
2023-02-24 10:25:21.168 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Start installing Hangfire SQL objects...
2023-02-24 10:25:21.431 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Hangfire SQL objects installed.
2023-02-24 10:25:21.509 +07:00 [Information] (Hangfire.BackgroundJobServer.) Starting Hangfire Server using job storage: 'SQL Server: 192.168.85.11@BO_GOLF1'
2023-02-24 10:25:21.509 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for SQL Server job storage: Queue poll interval: 00:00:15.
2023-02-24 10:25:21.509 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2023-02-24 10:25:21.531 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop BackgroundServerProcess:e569bc5f has started in 15.4086 ms
2023-02-24 10:25:21.572 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:1108:2c08d311 successfully announced in 34.9121 ms
2023-02-24 10:25:21.589 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerHeartbeatProcess:f91bfb5e has started in 7.9711 ms
2023-02-24 10:25:21.589 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:1108:2c08d311 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2023-02-24 10:25:21.594 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerWatchdog:dc6737e1 has started in 4.35 ms
2023-02-24 10:25:21.597 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerJobCancellationWatcher:24d5034e has started in 6.4502 ms
2023-02-24 10:25:21.601 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ExpirationManager:275d9b62 has started in 3.5219 ms
2023-02-24 10:25:21.604 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop CountersAggregator:fcf786bf has started in 5.663 ms
2023-02-24 10:25:21.607 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop SqlServerHeartbeatProcess:96a32e41 has started in 6.0499 ms
2023-02-24 10:25:21.607 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 10:25:21.608 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 10:25:21.611 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:7e7d4c46 has started in 7.4112 ms
2023-02-24 10:25:21.616 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:a91b353d has started in 11.6566 ms
2023-02-24 10:25:21.619 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:86196c6d has started in 14.8666 ms
2023-02-24 10:25:21.625 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:d5a33671 has started in 20.1198 ms
2023-02-24 10:25:21.630 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:b3bf9e45 has started in 26.0499 ms
2023-02-24 10:25:21.668 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:6c9711a5 has started in 63.6135 ms
2023-02-24 10:25:21.668 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:f73347ed has started in 63.6662 ms
2023-02-24 10:25:21.670 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 10:25:21.672 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:7f9bc1d1 has started in 67.8868 ms
2023-02-24 10:25:21.673 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:0dfb7e51 has started in 69.5174 ms
2023-02-24 10:25:21.677 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:3b75b00a has started in 72.9724 ms
2023-02-24 10:25:21.681 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:ffc3468f has started in 77.2544 ms
2023-02-24 10:25:21.684 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 10:25:21.684 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:0c59fff9 has started in 79.9258 ms
2023-02-24 10:25:21.691 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:4ff6325c has started in 87.0906 ms
2023-02-24 10:25:21.691 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:cb20e1f0 has started in 84.2622 ms
2023-02-24 10:25:21.697 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:3d5547ab has started in 92.7387 ms
2023-02-24 10:25:21.700 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:afcaa858 has started in 95.8859 ms
2023-02-24 10:25:21.708 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:68997a92 has started in 104.2312 ms
2023-02-24 10:25:21.710 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:7f91cc15 has started in 106.3913 ms
2023-02-24 10:25:21.716 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:5ffafa9b has started in 111.9469 ms
2023-02-24 10:25:21.719 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:95ddc1e2 has started in 114.5473 ms
2023-02-24 10:25:21.720 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 10:25:21.723 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:1108:2c08d311 all the dispatchers started
2023-02-24 10:25:21.728 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop DelayedJobScheduler:c1ad1e9a has started in 13.1269 ms
2023-02-24 10:25:21.732 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop RecurringJobScheduler:d2377c74 has started in 12.4285 ms
2023-02-24 10:25:21.765 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 10:25:56.482 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Start installing Hangfire SQL objects...
2023-02-24 10:25:56.749 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Hangfire SQL objects installed.
2023-02-24 10:25:56.851 +07:00 [Information] (Hangfire.BackgroundJobServer.) Starting Hangfire Server using job storage: 'SQL Server: 192.168.85.11@BO_GOLF1'
2023-02-24 10:25:56.851 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for SQL Server job storage: Queue poll interval: 00:00:15.
2023-02-24 10:25:56.851 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2023-02-24 10:25:56.887 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop BackgroundServerProcess:5f30cb45 has started in 23.1846 ms
2023-02-24 10:25:56.926 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:2852:38074c95 successfully announced in 35.5198 ms
2023-02-24 10:25:56.937 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerHeartbeatProcess:d1a02a6e has started in 9.5244 ms
2023-02-24 10:25:56.937 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:2852:38074c95 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2023-02-24 10:25:56.948 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerWatchdog:c840fa77 has started in 10.5521 ms
2023-02-24 10:25:56.954 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerJobCancellationWatcher:7608b5c6 has started in 11.7323 ms
2023-02-24 10:25:56.961 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ExpirationManager:592e9e64 has started in 12.0212 ms
2023-02-24 10:25:56.985 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop CountersAggregator:d65967e7 has started in 27.6766 ms
2023-02-24 10:25:56.987 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 10:25:56.988 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 10:25:56.997 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop SqlServerHeartbeatProcess:ea8d73bd has started in 33.0746 ms
2023-02-24 10:25:57.021 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:bcaac2e5 has started in 28.5117 ms
2023-02-24 10:25:57.062 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:f2f318d1 has started in 69.0247 ms
2023-02-24 10:25:57.065 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:608c5027 has started in 70.1051 ms
2023-02-24 10:25:57.093 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:d45133d4 has started in 100.5147 ms
2023-02-24 10:25:57.103 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 10:25:57.105 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:9638fdbf has started in 111.8881 ms
2023-02-24 10:25:57.111 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:67f9e169 has started in 117.9352 ms
2023-02-24 10:25:57.117 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:1bc3675f has started in 124.3483 ms
2023-02-24 10:25:57.125 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 10:25:57.125 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:d7c1b895 has started in 131.9193 ms
2023-02-24 10:25:57.154 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:45aadc6f has started in 160.743 ms
2023-02-24 10:25:57.154 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:0a4c6ab3 has started in 160.7361 ms
2023-02-24 10:25:57.158 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 10:25:57.163 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:c4e89f93 has started in 170.5678 ms
2023-02-24 10:25:57.179 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:2f52f76d has started in 186.5591 ms
2023-02-24 10:25:57.189 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:8af59ae0 has started in 195.7366 ms
2023-02-24 10:25:57.189 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:cc90ede1 has started in 195.746 ms
2023-02-24 10:25:57.193 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:97fd4a25 has started in 200.3164 ms
2023-02-24 10:25:57.193 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 10:25:57.204 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:3acc6da4 has started in 210.9182 ms
2023-02-24 10:25:57.244 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:7965bd74 has started in 251.3656 ms
2023-02-24 10:25:57.244 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:79792e8a has started in 251.3647 ms
2023-02-24 10:25:57.251 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:5f5f286e has started in 257.2566 ms
2023-02-24 10:25:57.255 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:f2de96d9 has started in 261.6645 ms
2023-02-24 10:25:57.259 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:2852:38074c95 all the dispatchers started
2023-02-24 10:25:57.260 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop DelayedJobScheduler:c6e4f828 has started in 5.8871 ms
2023-02-24 10:25:57.263 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop RecurringJobScheduler:8b2af626 has started in 7.0197 ms
2023-02-24 10:26:26.979 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:2852:38074c95 heartbeat successfully sent
2023-02-24 10:27:12.963 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Start installing Hangfire SQL objects...
2023-02-24 10:27:13.011 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Hangfire SQL objects installed.
2023-02-24 10:27:13.084 +07:00 [Information] (Hangfire.BackgroundJobServer.) Starting Hangfire Server using job storage: 'SQL Server: 192.168.85.11@BO_GOLF1'
2023-02-24 10:27:13.085 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for SQL Server job storage: Queue poll interval: 00:00:15.
2023-02-24 10:27:13.085 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2023-02-24 10:27:13.104 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop BackgroundServerProcess:b9f92094 has started in 13.3017 ms
2023-02-24 10:27:13.162 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:12888:78949edd successfully announced in 56.2093 ms
2023-02-24 10:27:13.170 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerHeartbeatProcess:618e1aec has started in 7.4899 ms
2023-02-24 10:27:13.171 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:12888:78949edd is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2023-02-24 10:27:13.175 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerWatchdog:113450b8 has started in 3.4033 ms
2023-02-24 10:27:13.177 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerJobCancellationWatcher:a26ce058 has started in 4.9815 ms
2023-02-24 10:27:13.208 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ExpirationManager:a484093a has started in 31.4916 ms
2023-02-24 10:27:13.208 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop CountersAggregator:a8b1d78a has started in 30.5534 ms
2023-02-24 10:27:13.209 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 10:27:13.209 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 10:27:13.238 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:303475da has started in 28.1275 ms
2023-02-24 10:27:13.238 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop SqlServerHeartbeatProcess:8f37a028 has started in 30.3698 ms
2023-02-24 10:27:13.763 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:855301db has started in 553.2383 ms
2023-02-24 10:27:13.764 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:ece05ab5 has started in 553.4802 ms
2023-02-24 10:27:13.766 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:c0cdccf1 has started in 555.4764 ms
2023-02-24 10:27:13.769 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:a6d5a114 has started in 558.6179 ms
2023-02-24 10:27:13.777 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:2d1e308b has started in 567.1016 ms
2023-02-24 10:27:13.777 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 10:27:13.783 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:283e3c37 has started in 572.6463 ms
2023-02-24 10:27:13.788 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 10:27:13.791 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:f3ffa7e7 has started in 580.9147 ms
2023-02-24 10:27:13.820 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:5b1153a1 has started in 609.8288 ms
2023-02-24 10:27:13.820 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:235f9bb7 has started in 609.8189 ms
2023-02-24 10:27:13.825 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 10:27:13.864 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:fc7d753c has started in 653.7951 ms
2023-02-24 10:27:13.864 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:85f26d36 has started in 653.791 ms
2023-02-24 10:27:13.868 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:279d1664 has started in 657.3772 ms
2023-02-24 10:27:13.870 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:b685d4d7 has started in 660.0044 ms
2023-02-24 10:27:13.873 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:9df8ff52 has started in 662.5802 ms
2023-02-24 10:27:13.877 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:635e824e has started in 665.7467 ms
2023-02-24 10:27:13.879 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:1725cd26 has started in 668.87 ms
2023-02-24 10:27:13.883 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:652e5c11 has started in 672.6708 ms
2023-02-24 10:27:13.885 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:dcd3b0d0 has started in 674.4594 ms
2023-02-24 10:27:13.888 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 10:27:13.888 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:33d73adb has started in 678.061 ms
2023-02-24 10:27:13.890 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop DelayedJobScheduler:099186d8 has started in 5.4923 ms
2023-02-24 10:27:13.891 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:12888:78949edd all the dispatchers started
2023-02-24 10:27:13.925 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop RecurringJobScheduler:d0a86f8c has started in 37.2362 ms
2023-02-24 10:27:43.221 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:12888:78949edd heartbeat successfully sent
2023-02-24 10:28:13.244 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:12888:78949edd heartbeat successfully sent
2023-02-24 10:28:43.263 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:12888:78949edd heartbeat successfully sent
2023-02-24 10:29:13.277 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:12888:78949edd heartbeat successfully sent
2023-02-24 10:29:29.142 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 10:29:30.426 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2023-02-24 10:29:30.825 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"NonRefundedFee"' on entity type '"Booking"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.826 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalEstimateFee"' on entity type '"Booking"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.826 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"BuggyFee"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.826 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"EstimatedPrice"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.826 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"NonRefundedFee"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.826 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"SeagolfPrice"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.827 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"OutMoneyAcc"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.827 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"SdkRefundMoney"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.827 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoney"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.827 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoneyAcc"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.827 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Charge_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.827 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Tien_hoan"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.829 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Total_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.829 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Trans_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.829 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Charge_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.829 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Tien_hoan"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.830 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoneyAcc"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.830 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Total_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:30.830 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Trans_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 10:29:31.011 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 10:29:34.460 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 10:29:34.562 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:29:34.2166645+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 10:29:34.676 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:4ebe4a93-5a18-4fb5-96f8-bfbda590d3ed
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:4ebe4a93-5a18-4fb5-96f8-bfbda590d3ed
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:29:34.765 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:29:34.920 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 10:29:35.156 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 10:29:35.178 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:29:34.2166645+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 10:29:35.180 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:4ebe4a93-5a18-4fb5-96f8-bfbda590d3ed
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:4ebe4a93-5a18-4fb5-96f8-bfbda590d3ed
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:29:35.212 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:29:35.212 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 10:29:35.478 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 10:29:35.496 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:29:34.2166645+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 10:29:35.498 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:4ebe4a93-5a18-4fb5-96f8-bfbda590d3ed
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:4ebe4a93-5a18-4fb5-96f8-bfbda590d3ed
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:29:35.531 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:29:35.531 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 10:29:35.787 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 10:29:35.827 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("28"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:29:34.2166645+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T10:29:34.9210587+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T10:29:35.2130303+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T10:29:35.5316330+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 10:29:35.829 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:4ebe4a93-5a18-4fb5-96f8-bfbda590d3ed
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:4ebe4a93-5a18-4fb5-96f8-bfbda590d3ed
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:29:35.861 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:29:35.861 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 10:29:35.862 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 10:29:35.871 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 10:29:35.908 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 10:29:35.955 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("44"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T10:29:34.2166645+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T10:29:34.9210587+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T10:29:35.2130303+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T10:29:35.5316330+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T10:29:35.8624095+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T10:29:35.8624098+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T10:29:35.8624076+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T10:29:35.8624099+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T10:29:35.8624104+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T10:29:35.9052143+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 10:29:35.956 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:4ebe4a93-5a18-4fb5-96f8-bfbda590d3ed
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:4ebe4a93-5a18-4fb5-96f8-bfbda590d3ed
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 10:29:35.976 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:29:35.993 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:29:36.009 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 10:29:43.295 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:12888:78949edd heartbeat successfully sent
2023-02-24 10:30:13.313 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:12888:78949edd heartbeat successfully sent
2023-02-24 10:30:36.243 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 10:30:43.328 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:12888:78949edd heartbeat successfully sent
2023-02-24 10:30:52.148 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:13:25.601 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Start installing Hangfire SQL objects...
2023-02-24 13:13:25.750 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Hangfire SQL objects installed.
2023-02-24 13:13:25.824 +07:00 [Information] (Hangfire.BackgroundJobServer.) Starting Hangfire Server using job storage: 'SQL Server: 192.168.85.11@BO_GOLF1'
2023-02-24 13:13:25.824 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for SQL Server job storage: Queue poll interval: 00:00:15.
2023-02-24 13:13:25.824 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2023-02-24 13:13:25.857 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop BackgroundServerProcess:35decb61 has started in 28.2591 ms
2023-02-24 13:13:25.944 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:20076:efb10784 successfully announced in 84.2686 ms
2023-02-24 13:13:25.949 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerHeartbeatProcess:dc2b22f8 has started in 4.3344 ms
2023-02-24 13:13:25.949 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:20076:efb10784 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2023-02-24 13:13:25.953 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerWatchdog:15d6b1d6 has started in 3.1347 ms
2023-02-24 13:13:25.955 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerJobCancellationWatcher:5390d5df has started in 5.0169 ms
2023-02-24 13:13:25.958 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ExpirationManager:e0aa5ea4 has started in 3.2313 ms
2023-02-24 13:13:25.961 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop CountersAggregator:0a2443ef has started in 4.6173 ms
2023-02-24 13:13:25.963 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop SqlServerHeartbeatProcess:3cc28d43 has started in 4.4759 ms
2023-02-24 13:13:25.963 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 13:13:25.963 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 13:13:25.966 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:73539609 has started in 5.3031 ms
2023-02-24 13:13:25.968 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:1598047b has started in 7.5245 ms
2023-02-24 13:13:25.971 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:46ebc4be has started in 10.2947 ms
2023-02-24 13:13:25.973 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:f768b341 has started in 12.5888 ms
2023-02-24 13:13:25.977 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:c69f39ea has started in 16.4661 ms
2023-02-24 13:13:25.981 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:ca239f7d has started in 20.0273 ms
2023-02-24 13:13:25.985 +07:00 [Information] (Hangfire.Server.ServerWatchdog.) 4 servers were removed due to timeout
2023-02-24 13:13:25.985 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:03c53052 has started in 24.4354 ms
2023-02-24 13:13:26.005 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:42f22c69 has started in 44.1038 ms
2023-02-24 13:13:26.005 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:8031f95b has started in 44.1038 ms
2023-02-24 13:13:26.009 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:4558fb47 has started in 48.5304 ms
2023-02-24 13:13:26.014 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:841d7f1b has started in 53.5225 ms
2023-02-24 13:13:26.016 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:9c729f5a has started in 55.0873 ms
2023-02-24 13:13:26.020 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:3bca7b84 has started in 58.3618 ms
2023-02-24 13:13:26.020 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 13:13:26.022 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:bfb782e0 has started in 61.3061 ms
2023-02-24 13:13:26.025 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:73b51b6e has started in 64.726 ms
2023-02-24 13:13:26.028 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:f7a5e9b7 has started in 67.7061 ms
2023-02-24 13:13:26.034 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:232c2917 has started in 73.4015 ms
2023-02-24 13:13:26.037 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:6ef737c2 has started in 76.6143 ms
2023-02-24 13:13:26.043 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:f113b565 has started in 81.7948 ms
2023-02-24 13:13:26.048 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:6c167717 has started in 87.7397 ms
2023-02-24 13:13:26.048 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop DelayedJobScheduler:3820f008 has started in 6.0364 ms
2023-02-24 13:13:26.049 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:20076:efb10784 all the dispatchers started
2023-02-24 13:13:26.053 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 13:13:26.053 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop RecurringJobScheduler:8bd26032 has started in 8.625 ms
2023-02-24 13:13:26.086 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 13:13:26.093 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 13:13:26.253 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 13:13:27.987 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2023-02-24 13:13:28.136 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"NonRefundedFee"' on entity type '"Booking"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.137 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalEstimateFee"' on entity type '"Booking"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.137 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"BuggyFee"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.137 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"EstimatedPrice"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.137 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"NonRefundedFee"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.137 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"SeagolfPrice"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.138 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"OutMoneyAcc"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.138 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"SdkRefundMoney"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.138 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoney"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.138 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoneyAcc"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.138 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Charge_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.140 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Tien_hoan"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.140 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Total_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.140 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Trans_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.140 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Charge_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.140 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Tien_hoan"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.140 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoneyAcc"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.140 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Total_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.140 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Trans_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:13:28.379 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 13:13:31.810 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 13:13:33.185 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("15"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T13:13:31.5448845+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 13:13:33.254 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0a2734ef-79d1-421f-b5f6-c4a0a440e9d2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0a2734ef-79d1-421f-b5f6-c4a0a440e9d2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 13:13:33.340 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:13:33.368 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 13:13:33.640 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 13:13:33.659 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T13:13:31.5448845+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 13:13:33.661 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0a2734ef-79d1-421f-b5f6-c4a0a440e9d2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0a2734ef-79d1-421f-b5f6-c4a0a440e9d2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 13:13:33.691 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:13:33.692 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 13:13:33.958 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 13:13:33.975 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T13:13:31.5448845+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 13:13:33.977 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0a2734ef-79d1-421f-b5f6-c4a0a440e9d2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0a2734ef-79d1-421f-b5f6-c4a0a440e9d2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 13:13:34.008 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:13:34.008 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 13:13:34.256 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 13:13:34.273 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T13:13:31.5448845+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T13:13:33.3682650+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T13:13:33.6921522+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T13:13:34.0089471+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 13:13:34.275 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0a2734ef-79d1-421f-b5f6-c4a0a440e9d2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0a2734ef-79d1-421f-b5f6-c4a0a440e9d2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 13:13:34.313 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:13:34.313 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 13:13:34.314 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 13:13:34.321 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 13:13:34.328 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 13:13:34.339 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T13:13:31.5448845+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T13:13:33.3682650+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T13:13:33.6921522+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T13:13:34.0089471+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T13:13:34.3140086+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T13:13:34.3140089+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T13:13:34.3140065+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T13:13:34.3140091+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T13:13:34.3140094+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T13:13:34.3254067+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 13:13:34.340 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0a2734ef-79d1-421f-b5f6-c4a0a440e9d2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:0a2734ef-79d1-421f-b5f6-c4a0a440e9d2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 13:13:34.359 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:13:34.374 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:13:34.391 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:13:55.984 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:14:26.006 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:14:56.028 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:15:26.042 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:15:56.081 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:16:26.099 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:16:56.128 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:17:26.156 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:17:56.177 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:18:26.027 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 13:18:26.197 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:18:56.216 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:19:26.228 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:19:56.251 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:20:26.276 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:20:56.304 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:21:26.345 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:21:56.364 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:22:26.384 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:22:56.396 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:23:26.043 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 13:23:26.420 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:23:56.434 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:24:27.037 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:24:57.059 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:25:27.079 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:25:57.110 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:26:27.134 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:26:57.170 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:27:27.197 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:27:57.221 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:28:26.070 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 13:28:27.238 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:28:27.255 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:28:57.255 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:29:27.268 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:29:57.285 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:30:27.309 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:30:57.325 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:31:27.356 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:31:57.381 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:32:27.424 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:32:57.449 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:33:19.757 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:33:19.759 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:33:26.103 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 13:33:27.465 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:33:57.542 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:34:02.474 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:34:02.479 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:34:16.972 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:34:16.973 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:34:27.572 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:34:34.819 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:34:34.824 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:34:51.205 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:34:51.211 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:34:57.589 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:35:06.004 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:35:06.006 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:35:25.980 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:35:25.984 +07:00 [Information] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Successfully validated the token.
2023-02-24 13:35:27.794 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:35:57.812 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:36:27.831 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:20076:efb10784 heartbeat successfully sent
2023-02-24 13:39:08.632 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Start installing Hangfire SQL objects...
2023-02-24 13:39:08.686 +07:00 [Information] (Hangfire.SqlServer.SqlServerObjectsInstaller.) Hangfire SQL objects installed.
2023-02-24 13:39:08.727 +07:00 [Information] (Hangfire.BackgroundJobServer.) Starting Hangfire Server using job storage: 'SQL Server: 192.168.85.11@BO_GOLF1'
2023-02-24 13:39:08.727 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for SQL Server job storage: Queue poll interval: 00:00:15.
2023-02-24 13:39:08.727 +07:00 [Information] (Hangfire.BackgroundJobServer.) Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2023-02-24 13:39:08.733 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop BackgroundServerProcess:ab2a9c41 has started in 2.8306 ms
2023-02-24 13:39:08.750 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:16396:e7fb5af7 successfully announced in 14.9354 ms
2023-02-24 13:39:08.752 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerHeartbeatProcess:aa349fdd has started in 1.3583 ms
2023-02-24 13:39:08.752 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:16396:e7fb5af7 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2023-02-24 13:39:08.753 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerWatchdog:5c9aa40c has started in 0.5663 ms
2023-02-24 13:39:08.754 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ServerJobCancellationWatcher:96f307ee has started in 0.5902 ms
2023-02-24 13:39:08.755 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop ExpirationManager:b9c4a980 has started in 0.6447 ms
2023-02-24 13:39:08.755 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop CountersAggregator:66957950 has started in 0.5402 ms
2023-02-24 13:39:08.756 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop SqlServerHeartbeatProcess:a65265f2 has started in 0.5219 ms
2023-02-24 13:39:08.756 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 13:39:08.757 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 13:39:08.757 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:53ca1710 has started in 0.9657 ms
2023-02-24 13:39:08.758 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:9d4b2ecc has started in 1.6615 ms
2023-02-24 13:39:08.759 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:787272f7 has started in 2.5656 ms
2023-02-24 13:39:08.760 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:2da003f3 has started in 3.6262 ms
2023-02-24 13:39:08.760 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:6c2c4759 has started in 4.106 ms
2023-02-24 13:39:08.761 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:6085376f has started in 4.4863 ms
2023-02-24 13:39:08.761 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:b44a4e54 has started in 4.8014 ms
2023-02-24 13:39:08.761 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:b4ee46c1 has started in 5.1611 ms
2023-02-24 13:39:08.762 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:c57b97ec has started in 5.5718 ms
2023-02-24 13:39:08.762 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:939d997a has started in 5.9391 ms
2023-02-24 13:39:08.763 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:d4f9b08d has started in 6.2588 ms
2023-02-24 13:39:08.763 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:6c1c0193 has started in 6.5736 ms
2023-02-24 13:39:08.763 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:c411bd71 has started in 6.9204 ms
2023-02-24 13:39:08.764 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:da9401d0 has started in 7.2407 ms
2023-02-24 13:39:08.764 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:6f3df037 has started in 7.6528 ms
2023-02-24 13:39:08.764 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:2f51389b has started in 7.9963 ms
2023-02-24 13:39:08.765 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:d9ec2ca4 has started in 8.3191 ms
2023-02-24 13:39:08.765 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:bf25bcfc has started in 8.692 ms
2023-02-24 13:39:08.765 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:e5f38a0b has started in 9.0695 ms
2023-02-24 13:39:08.766 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop Worker:1757e88a has started in 9.4407 ms
2023-02-24 13:39:08.766 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop DelayedJobScheduler:d7c20748 has started in 0.3971 ms
2023-02-24 13:39:08.766 +07:00 [Information] (Hangfire.Server.BackgroundServerProcess.) Server hoangnt:16396:e7fb5af7 all the dispatchers started
2023-02-24 13:39:08.767 +07:00 [Debug] (Hangfire.Processing.BackgroundExecution.) Execution loop RecurringJobScheduler:085e577d has started in 0.363 ms
2023-02-24 13:39:08.774 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 13:39:08.807 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 13:39:08.812 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 13:39:08.817 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 13:39:08.888 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 13:39:09.804 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2023-02-24 13:39:09.896 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"NonRefundedFee"' on entity type '"Booking"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.897 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalEstimateFee"' on entity type '"Booking"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.897 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"BuggyFee"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.897 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"EstimatedPrice"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.897 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"NonRefundedFee"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.897 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"SeagolfPrice"' on entity type '"BookingLine"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.897 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"OutMoneyAcc"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.897 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"SdkRefundMoney"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.898 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoney"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.898 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoneyAcc"' on entity type '"BookingTransactionPayment"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.898 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Charge_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.898 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Tien_hoan"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.898 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Total_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.900 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Trans_Amt"' on entity type '"InTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.900 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Charge_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.900 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Tien_hoan"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.900 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"TotalMoneyAcc"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.900 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Total_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:09.900 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Model.Validation.) No type was specified for the decimal property '"Trans_Amt"' on entity type '"OutTransactionDetails"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType()', specify precision and scale using 'HasPrecision()' or configure a value converter using 'HasConversion()'.
2023-02-24 13:39:10.019 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 13:39:13.058 +07:00 [Error] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://localhost:5001/.well-known/openid-configuration'.
 ---> System.IO.IOException: IDX20804: Unable to retrieve document from: 'https://localhost:5001/.well-known/openid-configuration'.
 ---> System.Net.Http.HttpRequestException: No connection could be made because the target machine actively refused it.
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-02-24 13:39:13.058 +07:00 [Error] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://localhost:5001/.well-known/openid-configuration'.
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-02-24 13:39:13.156 +07:00 [Error] (Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.) An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://localhost:5001/.well-known/openid-configuration'.
 ---> System.IO.IOException: IDX20804: Unable to retrieve document from: 'https://localhost:5001/.well-known/openid-configuration'.
 ---> System.Net.Http.HttpRequestException: No connection could be made because the target machine actively refused it.
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Builder.Extensions.MapMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-02-24 13:39:13.156 +07:00 [Error] (Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.) An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://localhost:5001/.well-known/openid-configuration'.
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Builder.Extensions.MapMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-02-24 13:39:13.209 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 13:39:13.246 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T13:39:12.9828999+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 13:39:13.478 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:47efb376-63df-4fd5-af03-04aff630fa49
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:47efb376-63df-4fd5-af03-04aff630fa49
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 13:39:13.479 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:39:13.488 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 13:39:13.726 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 13:39:13.749 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T13:39:12.9828999+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 13:39:13.751 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:47efb376-63df-4fd5-af03-04aff630fa49
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:47efb376-63df-4fd5-af03-04aff630fa49
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 13:39:13.751 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:39:13.752 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 13:39:13.985 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 13:39:14.004 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("8"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T13:39:12.9828999+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 13:39:14.006 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:47efb376-63df-4fd5-af03-04aff630fa49
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:47efb376-63df-4fd5-af03-04aff630fa49
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 13:39:14.006 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:39:14.007 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 13:39:14.249 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 13:39:14.267 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T13:39:12.9828999+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T13:39:13.4886531+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T13:39:13.7525098+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T13:39:14.0073753+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 13:39:14.269 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:47efb376-63df-4fd5-af03-04aff630fa49
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:47efb376-63df-4fd5-af03-04aff630fa49
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 13:39:14.270 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:39:14.270 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 13:39:14.270 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 13:39:14.277 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 13:39:14.283 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 13:39:14.294 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("8"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T13:39:12.9828999+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T13:39:13.4886531+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T13:39:13.7525098+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T13:39:14.0073753+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T13:39:14.2707550+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T13:39:14.2707552+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T13:39:14.2707537+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T13:39:14.2707555+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T13:39:14.2707557+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T13:39:14.2807691+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 13:39:14.294 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:47efb376-63df-4fd5-af03-04aff630fa49
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:47efb376-63df-4fd5-af03-04aff630fa49
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 13:39:14.297 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:39:14.297 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:39:14.297 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 13:39:38.775 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:40:08.794 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:40:38.838 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:41:08.868 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:41:40.973 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:42:10.989 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:42:41.013 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:43:11.075 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:43:41.110 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:44:08.774 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 13:44:08.787 +07:00 [Information] (Hangfire.Server.ServerWatchdog.) 1 servers were removed due to timeout
2023-02-24 13:44:11.134 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:44:41.158 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:45:05.429 +07:00 [Error] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://localhost:5001/.well-known/openid-configuration'.
 ---> System.IO.IOException: IDX20804: Unable to retrieve document from: 'https://localhost:5001/.well-known/openid-configuration'.
 ---> System.Net.Http.HttpRequestException: No connection could be made because the target machine actively refused it.
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-02-24 13:45:05.429 +07:00 [Error] (Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.) Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://localhost:5001/.well-known/openid-configuration'.
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-02-24 13:45:05.431 +07:00 [Error] (Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.) An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://localhost:5001/.well-known/openid-configuration'.
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Builder.Extensions.MapMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-02-24 13:45:05.431 +07:00 [Error] (Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.) An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://localhost:5001/.well-known/openid-configuration'.
 ---> System.IO.IOException: IDX20804: Unable to retrieve document from: 'https://localhost:5001/.well-known/openid-configuration'.
 ---> System.Net.Http.HttpRequestException: No connection could be made because the target machine actively refused it.
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Builder.Extensions.MapMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-02-24 13:45:11.183 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:45:41.199 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:46:11.230 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:46:41.247 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:47:11.266 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:47:41.294 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:48:11.320 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:48:41.345 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:49:08.787 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 13:49:11.365 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:49:41.389 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:50:11.413 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:50:41.427 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:51:11.449 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:51:41.473 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:52:11.493 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:52:41.522 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:53:11.540 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:53:41.568 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:54:08.804 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 13:54:11.589 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:54:41.661 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:55:11.672 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:55:41.690 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:56:11.720 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:56:41.745 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:57:11.762 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:57:41.786 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:58:11.812 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:58:41.825 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:59:08.823 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 13:59:11.843 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 13:59:41.864 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:00:11.895 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:00:41.921 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:01:11.935 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:01:41.968 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:02:11.993 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:02:42.035 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:03:12.064 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:03:42.212 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:04:08.856 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:04:12.231 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:04:42.270 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:05:12.281 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:05:42.295 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:06:12.314 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:06:42.339 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:07:12.358 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:07:42.384 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:08:12.411 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:08:42.433 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:09:08.885 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:09:08.885 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 14:09:08.892 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 14:09:08.895 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 14:09:08.899 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 14:09:08.903 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 14:09:12.458 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:09:42.478 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:10:12.976 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:10:42.987 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:11:13.003 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:11:13.140 +07:00 [Debug] (Hangfire.Server.RecurringJobScheduler.) 1 recurring job(s) processed by scheduler.
2023-02-24 14:11:13.194 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 14:11:14.042 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:11:14.061 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("10"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:11:13.7789652+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:11:14.063 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:11:14.064 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:14.064 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:11:14.315 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:11:14.329 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:11:13.7789652+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:11:14.330 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:11:14.331 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:14.331 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:11:14.575 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:11:14.589 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:11:13.7789652+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:11:14.590 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:11:14.591 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:14.591 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:11:14.838 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:11:14.854 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:11:13.7789652+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:11:14.0647854+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:11:14.3318380+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:11:14.5913837+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:11:14.856 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:11:14.856 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:14.856 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:11:14.857 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 14:11:14.857 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 14:11:14.859 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 14:11:14.865 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:11:13.7789652+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:11:14.0647854+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:11:14.3318380+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:11:14.5913837+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T14:11:14.8572943+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T14:11:14.8572944+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T14:11:14.8572940+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T14:11:14.8572946+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T14:11:14.8572948+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T14:11:14.8587700+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 14:11:14.865 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:11:14.867 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:14.867 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:14.867 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:43.027 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:11:58.172 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 14:11:58.226 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 14:11:58.910 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:11:58.924 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:11:58.6790378+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:11:58.926 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:11:58.927 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:58.927 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:11:59.177 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:11:59.200 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:11:58.6790378+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:11:59.203 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:11:59.205 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:59.205 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:11:59.438 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:11:59.453 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:11:58.6790378+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:11:59.454 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:11:59.455 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:59.455 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:11:59.691 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:11:59.706 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:11:58.6790378+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:11:58.9278378+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:11:59.2064951+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:11:59.4556472+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:11:59.708 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:11:59.709 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:59.709 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:11:59.709 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 14:11:59.710 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 14:11:59.717 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 14:11:59.724 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:11:58.6790378+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:11:58.9278378+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:11:59.2064951+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:11:59.4556472+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T14:11:59.7098217+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T14:11:59.7098222+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T14:11:59.7098210+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T14:11:59.7098227+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T14:11:59.7098231+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T14:11:59.7171386+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 14:11:59.724 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:11:59.726 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:59.726 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:11:59.726 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:12:13.038 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:12:43.052 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:13:13.081 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:13:13.274 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 14:13:13.304 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 14:13:14.008 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:13:14.022 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:13:13.7648507+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:13:14.023 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:13:14.024 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:13:14.024 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:13:14.251 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:13:14.266 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:13:13.7648507+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:13:14.268 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:13:14.268 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:13:14.268 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:13:14.510 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:13:14.526 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:13:13.7648507+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:13:14.528 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:13:14.528 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:13:14.528 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:13:14.755 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:13:14.770 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:13:13.7648507+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:13:14.0254552+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:13:14.2698802+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:13:14.5292504+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:13:14.771 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:13:14.772 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:13:14.772 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:13:14.772 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 14:13:14.773 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 14:13:14.780 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 14:13:14.787 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:13:13.7648507+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:13:14.0254552+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:13:14.2698802+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:13:14.5292504+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T14:13:14.7729031+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T14:13:14.7729036+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T14:13:14.7729023+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T14:13:14.7729041+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T14:13:14.7729049+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T14:13:14.7798420+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 14:13:14.788 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:13:14.790 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:13:14.790 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:13:14.790 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:13:43.105 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:14:08.913 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:14:13.136 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:14:13.372 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 14:14:13.405 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 14:14:13.986 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:14:14.001 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:14:13.7652047+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:14:14.003 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:14:14.004 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:14:14.004 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:14:14.242 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:14:14.256 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:14:13.7652047+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:14:14.259 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:14:14.259 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:14:14.260 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:14:14.497 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:14:14.511 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:14:13.7652047+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:14:14.513 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:14:14.514 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:14:14.514 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:14:14.750 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:14:14.764 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:14:13.7652047+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:14:14.0052935+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:14:14.2608461+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:14:14.5148924+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:14:14.766 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:14:14.766 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:14:14.767 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:14:14.768 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 14:14:14.768 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 14:14:14.770 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 14:14:14.778 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("8"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:14:13.7652047+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:14:14.0052935+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:14:14.2608461+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:14:14.5148924+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T14:14:14.7680103+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T14:14:14.7680108+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T14:14:14.7680095+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T14:14:14.7680113+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T14:14:14.7680117+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T14:14:14.7696916+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 14:14:14.779 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:14:14.780 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:14:14.780 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:14:14.781 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:14:46.874 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:15:16.904 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:15:46.928 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:16:16.994 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:16:32.051 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 14:16:32.088 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 14:16:33.724 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:16:33.738 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:16:33.4981244+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:16:33.739 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:16:33.740 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:16:33.740 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:16:33.966 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:16:33.982 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:16:33.4981244+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:16:33.984 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:16:33.984 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:16:33.985 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:16:34.216 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:16:34.229 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:16:33.4981244+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:16:34.230 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:16:34.230 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:16:34.231 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:16:34.461 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:16:34.478 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("8"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:16:33.4981244+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:16:33.7411781+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:16:33.9855294+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:16:34.2319404+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:16:34.480 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:16:34.481 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:16:34.481 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:16:34.482 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 14:16:34.482 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 14:16:34.484 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 14:16:34.491 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:16:33.4981244+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:16:33.7411781+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:16:33.9855294+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:16:34.2319404+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T14:16:34.4820332+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T14:16:34.4820337+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T14:16:34.4820324+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T14:16:34.4820342+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T14:16:34.4820394+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T14:16:34.4842361+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 14:16:34.491 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:16:34.493 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:16:34.493 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:16:34.493 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:16:47.008 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:17:17.027 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:17:47.044 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:18:17.058 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:18:47.081 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:19:08.939 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:19:17.105 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:19:47.125 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:19:47.259 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 14:19:47.280 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 14:19:48.999 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:19:49.014 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:19:48.7411834+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:19:49.015 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:19:49.016 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:19:49.016 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:19:49.247 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:19:49.259 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:19:48.7411834+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:19:49.261 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:19:49.261 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:19:49.262 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:19:49.803 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:19:49.818 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:19:48.7411834+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:19:49.819 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:19:49.820 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:19:49.820 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:19:50.069 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:19:50.089 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:19:48.7411834+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:19:49.0176826+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:19:49.2630746+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:19:49.8205751+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:19:50.093 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:19:50.094 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:19:50.095 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:19:50.095 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 14:19:50.095 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 14:19:50.098 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 14:19:50.104 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:19:48.7411834+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:19:49.0176826+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:19:49.2630746+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:19:49.8205751+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T14:19:50.0950892+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T14:19:50.0950893+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T14:19:50.0950889+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T14:19:50.0950895+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T14:19:50.0950897+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T14:19:50.0978708+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 14:19:50.104 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:19:50.106 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:19:50.106 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:19:50.106 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:20:17.148 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:20:47.166 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:21:17.190 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:21:32.367 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 14:21:32.391 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 14:21:33.077 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:21:33.091 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:21:32.8442606+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:21:33.093 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:21:33.093 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:21:33.094 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:21:33.325 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:21:33.339 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:21:32.8442606+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:21:33.340 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:21:33.341 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:21:33.341 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:21:33.570 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:21:33.584 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:21:32.8442606+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:21:33.586 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:21:33.586 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:21:33.586 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:21:33.832 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:21:33.847 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:21:32.8442606+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:21:33.0942080+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:21:33.3413029+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:21:33.5869860+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:21:33.848 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:21:33.849 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:21:33.849 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:21:33.849 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 14:21:33.849 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 14:21:33.852 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 14:21:33.859 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:21:32.8442606+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:21:33.0942080+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:21:33.3413029+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:21:33.5869860+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T14:21:33.8493275+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T14:21:33.8493277+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T14:21:33.8493272+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T14:21:33.8493279+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T14:21:33.8493281+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T14:21:33.8518646+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 14:21:33.860 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:b7fb2462-fd86-4ad1-a6e0-db949d992420
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:21:33.861 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:21:33.861 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:21:33.862 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:21:47.203 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:22:17.228 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:22:47.248 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:23:17.270 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:23:47.284 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:24:08.958 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:24:17.307 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:24:47.361 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:25:17.404 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:25:47.429 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:26:17.443 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:26:47.451 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:27:17.470 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:27:47.481 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:28:17.500 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:28:47.512 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:29:08.975 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:29:17.533 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:29:47.553 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:30:17.584 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:30:47.602 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:31:17.615 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:31:47.627 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:32:17.645 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:32:47.668 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:33:17.681 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:33:47.699 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:34:08.993 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:34:17.819 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:34:18.121 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 14:34:18.142 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 14:34:18.814 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:34:18.827 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:34:18.5795901+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:34:18.828 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9885352c-9b88-430d-8ed0-4eb6426d8945
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9885352c-9b88-430d-8ed0-4eb6426d8945
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:34:18.829 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:34:18.829 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:34:19.063 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:34:19.077 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:34:18.5795901+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:34:19.078 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9885352c-9b88-430d-8ed0-4eb6426d8945
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9885352c-9b88-430d-8ed0-4eb6426d8945
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:34:19.078 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:34:19.079 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:34:19.309 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:34:19.323 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:34:18.5795901+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:34:19.324 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9885352c-9b88-430d-8ed0-4eb6426d8945
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9885352c-9b88-430d-8ed0-4eb6426d8945
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:34:19.325 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:34:19.325 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:34:19.557 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:34:19.570 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:34:18.5795901+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:34:18.8294214+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:34:19.0790955+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:34:19.3254440+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:34:19.572 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9885352c-9b88-430d-8ed0-4eb6426d8945
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9885352c-9b88-430d-8ed0-4eb6426d8945
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:34:19.572 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:34:19.572 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:34:19.572 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 14:34:19.572 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 14:34:19.575 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 14:34:19.581 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:34:18.5795901+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:34:18.8294214+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:34:19.0790955+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:34:19.3254440+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T14:34:19.5727446+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T14:34:19.5727448+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T14:34:19.5727443+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T14:34:19.5727450+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T14:34:19.5727451+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T14:34:19.5747599+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 14:34:19.581 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9885352c-9b88-430d-8ed0-4eb6426d8945
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9885352c-9b88-430d-8ed0-4eb6426d8945
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:34:19.582 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:34:19.583 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:34:19.583 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:34:47.867 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:35:17.898 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:35:47.914 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:36:22.312 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:36:52.335 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:37:22.358 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:37:52.375 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:38:22.398 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:38:52.418 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:39:08.938 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 14:39:08.942 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 14:39:08.946 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 14:39:08.951 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 14:39:08.954 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 14:39:09.014 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:39:22.436 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:39:52.455 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:40:22.467 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:40:52.489 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:41:22.514 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:41:52.539 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:42:22.557 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:42:52.589 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:43:22.605 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:43:52.626 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:44:09.025 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:44:22.652 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:44:52.668 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:45:22.689 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:45:52.719 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:46:22.736 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:46:52.754 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:47:22.774 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:47:52.795 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:48:22.820 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:48:52.831 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:49:09.052 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:49:22.856 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:49:52.871 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:50:22.915 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:50:52.933 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:51:22.955 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:51:52.975 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:52:22.997 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:52:53.015 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:53:23.046 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:53:53.068 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:54:09.079 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:54:23.526 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:54:53.544 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:55:23.561 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:55:53.573 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:56:23.601 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:56:23.839 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 14:56:23.866 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 14:56:40.922 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:56:40.935 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:56:40.6999574+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:56:40.937 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7a0f4260-d71b-4ec0-baa4-cd9a5afe9e9d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7a0f4260-d71b-4ec0-baa4-cd9a5afe9e9d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:56:40.938 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:56:40.938 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:56:41.201 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:56:41.218 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:56:40.6999574+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:56:41.220 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7a0f4260-d71b-4ec0-baa4-cd9a5afe9e9d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7a0f4260-d71b-4ec0-baa4-cd9a5afe9e9d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:56:41.220 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:56:41.220 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:56:41.467 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:56:41.488 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:56:40.6999574+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:56:41.492 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7a0f4260-d71b-4ec0-baa4-cd9a5afe9e9d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7a0f4260-d71b-4ec0-baa4-cd9a5afe9e9d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:56:41.494 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:56:41.495 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:56:41.736 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 14:56:41.751 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:56:40.6999574+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:56:40.9385052+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:56:41.2208281+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:56:41.4954218+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 14:56:41.755 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7a0f4260-d71b-4ec0-baa4-cd9a5afe9e9d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7a0f4260-d71b-4ec0-baa4-cd9a5afe9e9d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:56:41.756 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:56:41.756 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 14:56:41.756 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 14:56:41.756 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 14:56:41.759 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 14:56:41.767 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("8"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T14:56:40.6999574+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T14:56:40.9385052+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T14:56:41.2208281+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T14:56:41.4954218+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T14:56:41.7564499+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T14:56:41.7564501+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T14:56:41.7564497+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T14:56:41.7564503+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T14:56:41.7564505+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T14:56:41.7589102+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 14:56:41.768 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7a0f4260-d71b-4ec0-baa4-cd9a5afe9e9d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7a0f4260-d71b-4ec0-baa4-cd9a5afe9e9d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 14:56:41.769 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:56:41.769 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:56:41.769 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 14:56:53.615 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:57:23.627 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:57:53.655 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:58:23.687 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:58:53.713 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:59:09.094 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 14:59:23.735 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 14:59:53.751 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:00:23.765 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:00:53.780 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:01:23.927 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:01:53.972 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:02:23.995 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:02:54.267 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:03:24.291 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:03:54.363 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:04:09.109 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:04:24.385 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:04:54.414 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:05:24.432 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:05:54.453 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:06:24.473 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:06:54.497 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:07:24.521 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:07:54.543 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:08:24.589 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:08:54.605 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:09:08.987 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 15:09:09.004 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 15:09:09.021 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 15:09:09.028 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 15:09:09.037 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 15:09:09.141 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:09:24.630 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:09:54.648 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:10:24.682 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:10:54.702 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:11:24.733 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:11:54.760 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:12:24.787 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:12:54.831 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:13:24.854 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:13:54.879 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:14:09.184 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:14:24.906 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:14:54.933 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:15:24.956 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:15:54.980 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:16:24.997 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:16:55.015 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:17:25.040 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:17:55.068 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:18:25.093 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:18:55.117 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:19:09.213 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:19:25.150 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:19:55.180 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:20:25.200 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:20:55.219 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:21:25.261 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:21:55.281 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:22:25.306 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:22:55.331 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:23:25.356 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:23:55.380 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:24:09.248 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:24:25.395 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:24:55.420 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:25:25.445 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:25:55.465 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:26:25.493 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:26:55.519 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:27:25.537 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:27:55.555 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:28:25.588 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:28:55.614 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:29:09.264 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:29:25.630 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:29:41.225 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 15:29:41.279 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 15:29:42.098 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 15:29:42.112 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T15:29:41.8706090+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 15:29:42.113 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9ad9fb5e-944a-4d60-a59f-8cfc10f0cbe8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9ad9fb5e-944a-4d60-a59f-8cfc10f0cbe8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 15:29:42.114 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:29:42.114 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 15:29:42.462 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 15:29:42.487 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("10"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T15:29:41.8706090+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 15:29:42.491 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9ad9fb5e-944a-4d60-a59f-8cfc10f0cbe8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9ad9fb5e-944a-4d60-a59f-8cfc10f0cbe8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 15:29:42.492 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:29:42.492 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 15:29:42.713 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 15:29:42.725 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T15:29:41.8706090+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 15:29:42.726 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9ad9fb5e-944a-4d60-a59f-8cfc10f0cbe8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9ad9fb5e-944a-4d60-a59f-8cfc10f0cbe8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 15:29:42.727 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:29:42.727 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 15:29:42.964 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 15:29:42.984 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T15:29:41.8706090+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T15:29:42.1148527+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T15:29:42.4923883+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T15:29:42.7276511+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 15:29:43.001 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9ad9fb5e-944a-4d60-a59f-8cfc10f0cbe8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9ad9fb5e-944a-4d60-a59f-8cfc10f0cbe8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 15:29:43.001 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:29:43.002 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 15:29:43.002 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 15:29:43.002 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 15:29:43.006 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 15:29:43.015 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("8"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T15:29:41.8706090+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T15:29:42.1148527+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T15:29:42.4923883+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T15:29:42.7276511+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T15:29:43.0020871+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T15:29:43.0020873+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T15:29:43.0020868+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T15:29:43.0020875+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T15:29:43.0020877+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T15:29:43.0059905+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 15:29:43.015 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9ad9fb5e-944a-4d60-a59f-8cfc10f0cbe8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9ad9fb5e-944a-4d60-a59f-8cfc10f0cbe8
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 15:29:43.019 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:29:43.019 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:29:43.019 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:29:55.661 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:30:25.685 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:30:55.710 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:31:25.747 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:31:55.771 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:32:25.795 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:32:55.814 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:33:25.833 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:33:55.852 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:34:09.278 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:34:25.875 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:34:55.894 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:35:25.906 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:35:55.930 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:36:25.943 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:36:55.955 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:37:25.968 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:37:55.980 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:37:56.682 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 15:37:56.698 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 15:37:57.354 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 15:37:57.374 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T15:37:57.1192038+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 15:37:57.379 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:5b7543d0-3009-428f-af15-04e95c9c5c86
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:5b7543d0-3009-428f-af15-04e95c9c5c86
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 15:37:57.381 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:37:57.382 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 15:37:57.615 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 15:37:57.628 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T15:37:57.1192038+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 15:37:57.630 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:5b7543d0-3009-428f-af15-04e95c9c5c86
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:5b7543d0-3009-428f-af15-04e95c9c5c86
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 15:37:57.630 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:37:57.630 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 15:37:57.861 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 15:37:57.872 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T15:37:57.1192038+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 15:37:57.874 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:5b7543d0-3009-428f-af15-04e95c9c5c86
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:5b7543d0-3009-428f-af15-04e95c9c5c86
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 15:37:57.874 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:37:57.874 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 15:37:58.108 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 15:37:58.120 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T15:37:57.1192038+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T15:37:57.3825214+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T15:37:57.6310294+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T15:37:57.8749489+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 15:37:58.122 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:5b7543d0-3009-428f-af15-04e95c9c5c86
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:5b7543d0-3009-428f-af15-04e95c9c5c86
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 15:37:58.122 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:37:58.123 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 15:37:58.123 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 15:37:58.123 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 15:37:58.125 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 15:37:58.131 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T15:37:57.1192038+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T15:37:57.3825214+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T15:37:57.6310294+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T15:37:57.8749489+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T15:37:58.1230954+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T15:37:58.1230956+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T15:37:58.1230952+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T15:37:58.1230958+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T15:37:58.1230960+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T15:37:58.1247139+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 15:37:58.132 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:5b7543d0-3009-428f-af15-04e95c9c5c86
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:5b7543d0-3009-428f-af15-04e95c9c5c86
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 15:37:58.133 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:37:58.134 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:37:58.134 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 15:38:25.998 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:38:56.022 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:39:09.131 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 15:39:09.136 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 15:39:09.140 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 15:39:09.144 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 15:39:09.148 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 15:39:09.301 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:39:26.034 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:39:56.065 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:40:26.083 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:40:56.101 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:41:26.125 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:41:56.143 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:42:26.169 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:42:56.199 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:43:26.216 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:43:56.241 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:44:09.318 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:44:26.264 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:44:56.277 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:45:26.292 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:45:56.302 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:46:26.325 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:46:56.337 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:47:26.356 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:47:56.379 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:48:26.404 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:48:56.429 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:49:09.340 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:49:26.475 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:49:56.488 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:50:26.530 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:50:56.542 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:51:26.555 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:51:56.578 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:52:26.596 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:52:56.608 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:53:26.627 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:53:56.650 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:54:09.355 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:54:26.692 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:54:56.715 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:55:26.736 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:55:56.746 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:56:26.770 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:56:56.813 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:57:26.837 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:57:56.854 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:58:26.875 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:58:56.884 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:59:09.371 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 15:59:26.902 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 15:59:56.926 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:00:26.953 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:00:56.968 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:01:26.987 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:01:57.004 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:02:27.033 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:02:57.082 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:03:27.099 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:03:57.124 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:04:09.395 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:04:31.436 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:05:01.488 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:05:31.516 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:06:01.544 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:06:31.573 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:07:01.603 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:07:31.632 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:08:01.658 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:08:31.679 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:09:01.697 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:09:09.180 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 16:09:09.196 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 16:09:09.210 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 16:09:09.222 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 16:09:09.238 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 16:09:09.411 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:09:31.725 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:10:01.745 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:10:31.771 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:11:01.789 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:11:31.819 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:12:01.843 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:12:31.867 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:13:01.891 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:13:31.908 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:14:01.921 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:14:09.427 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:14:31.945 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:15:02.168 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:15:32.191 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:16:02.218 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:16:32.256 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:17:02.276 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:17:32.298 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:18:02.324 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:18:32.340 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:19:02.367 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:19:09.470 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:19:32.393 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:20:02.416 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:20:32.446 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:21:02.462 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:21:32.483 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:22:02.500 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:22:32.546 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:23:02.577 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:23:32.608 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:24:02.625 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:24:09.685 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:24:32.643 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:25:02.671 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:25:32.693 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:26:02.724 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:26:32.745 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:27:02.761 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:27:32.780 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:28:02.799 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:28:32.832 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:29:02.862 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:29:09.722 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:29:32.891 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:30:02.915 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:30:32.944 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:31:02.962 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:31:32.984 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:32:03.003 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:32:33.032 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:33:03.054 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:33:33.067 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:34:03.095 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:34:09.757 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:34:33.114 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:35:03.141 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:35:33.159 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:36:03.184 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:36:33.212 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:37:03.232 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:37:33.246 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:38:03.277 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:38:33.318 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:39:03.339 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:39:09.352 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 16:39:09.365 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 16:39:09.377 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 16:39:09.393 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 16:39:09.404 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 16:39:09.787 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:39:33.361 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:40:03.381 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:40:33.396 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:41:03.419 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:41:33.446 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:42:03.473 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:42:33.492 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:43:03.523 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:43:33.554 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:44:03.577 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:44:09.810 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:44:33.606 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:45:03.632 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:45:33.660 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:46:03.672 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:46:33.692 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:47:03.704 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:47:33.723 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:48:03.741 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:48:27.286 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 16:48:27.327 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 16:48:29.084 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 16:48:29.098 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T16:48:28.8564895+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 16:48:29.099 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c921d978-d207-4c0d-9e6e-6988cc94dbe2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c921d978-d207-4c0d-9e6e-6988cc94dbe2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 16:48:29.100 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 16:48:29.100 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 16:48:29.335 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 16:48:29.348 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T16:48:28.8564895+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 16:48:29.350 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c921d978-d207-4c0d-9e6e-6988cc94dbe2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c921d978-d207-4c0d-9e6e-6988cc94dbe2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 16:48:29.351 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 16:48:29.351 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 16:48:29.598 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 16:48:29.625 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("15"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T16:48:28.8564895+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 16:48:29.628 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c921d978-d207-4c0d-9e6e-6988cc94dbe2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c921d978-d207-4c0d-9e6e-6988cc94dbe2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 16:48:29.631 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 16:48:29.631 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 16:48:29.875 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 16:48:29.895 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("7"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T16:48:28.8564895+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T16:48:29.1006810+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T16:48:29.3513683+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T16:48:29.6323995+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 16:48:29.899 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c921d978-d207-4c0d-9e6e-6988cc94dbe2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c921d978-d207-4c0d-9e6e-6988cc94dbe2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 16:48:29.901 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 16:48:29.902 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 16:48:29.902 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 16:48:29.902 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 16:48:29.911 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 16:48:29.918 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T16:48:28.8564895+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T16:48:29.1006810+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T16:48:29.3513683+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T16:48:29.6323995+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T16:48:29.9023513+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T16:48:29.9023523+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T16:48:29.9023495+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T16:48:29.9023532+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T16:48:29.9023544+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T16:48:29.9095962+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 16:48:29.918 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c921d978-d207-4c0d-9e6e-6988cc94dbe2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c921d978-d207-4c0d-9e6e-6988cc94dbe2
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 16:48:29.920 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 16:48:29.920 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 16:48:29.920 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 16:48:33.764 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:49:03.789 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:49:09.840 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:49:33.815 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:50:03.834 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:50:33.857 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:51:03.878 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:51:33.899 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:52:03.916 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:52:33.935 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:53:03.970 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:53:33.997 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:54:04.024 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:54:09.865 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:54:34.047 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:55:04.068 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:55:34.084 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:56:04.102 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:56:34.126 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:57:04.152 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:57:34.176 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:58:04.188 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:58:34.200 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:59:04.218 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 16:59:09.885 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 16:59:34.231 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:00:04.271 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:00:34.290 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:01:04.314 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:01:34.332 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:02:04.355 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:02:34.370 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:03:04.385 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:03:34.410 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:04:04.476 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:04:09.901 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 17:04:34.519 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:05:04.543 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:05:34.560 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:06:04.584 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:06:34.597 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:07:04.622 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:07:34.645 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:08:04.668 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:08:34.686 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:09:04.704 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:09:09.445 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'AggregatedCounter' table...
2023-02-24 17:09:09.454 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Job' table...
2023-02-24 17:09:09.462 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'List' table...
2023-02-24 17:09:09.468 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Set' table...
2023-02-24 17:09:09.473 +07:00 [Debug] (Hangfire.SqlServer.ExpirationManager.) Removing outdated records from the 'Hash' table...
2023-02-24 17:09:09.911 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 17:09:34.722 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:10:04.758 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:10:34.799 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:11:04.812 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:11:34.829 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:12:04.860 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:12:34.871 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:13:04.890 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:13:34.908 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:14:04.920 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:14:09.921 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 17:14:34.943 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:15:04.991 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:15:35.015 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:16:05.033 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:16:35.044 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:17:05.056 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:17:35.069 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:18:05.086 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:18:35.105 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:19:05.122 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:19:09.943 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 17:19:35.134 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:20:05.159 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:20:35.178 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:21:02.370 +07:00 [Debug] (Hangfire.Server.DelayedJobScheduler.) 1 scheduled job(s) processed by scheduler.
2023-02-24 17:21:02.391 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: Start
2023-02-24 17:21:04.153 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx] to folder brg [OUT_SB_BRG_20230217.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 17:21:04.165 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T17:21:03.8891250+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 17:21:04.166 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:bd879ba6-f076-4225-8ddd-c3f31a7651c6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:bd879ba6-f076-4225-8ddd-c3f31a7651c6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 17:21:04.167 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 17:21:04.167 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 17:21:04.392 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx] to folder brg [OUT_SB_BRG_20230219.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 17:21:04.405 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T17:21:03.8891250+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 17:21:04.407 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:bd879ba6-f076-4225-8ddd-c3f31a7651c6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:bd879ba6-f076-4225-8ddd-c3f31a7651c6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 17:21:04.409 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 17:21:04.409 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 17:21:04.655 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx] to folder brg [OUT_SB_BRG_20230220.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 17:21:04.670 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("5"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T17:21:03.8891250+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 17:21:04.675 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:bd879ba6-f076-4225-8ddd-c3f31a7651c6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:bd879ba6-f076-4225-8ddd-c3f31a7651c6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 17:21:04.675 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 17:21:04.676 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 17:21:04.917 +07:00 [Error] (SftpService.) Failed in uploading file [\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx] to folder brg [OUT_SB_BRG_20230223.xlsx]
System.IO.FileNotFoundException: Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.
File name: 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream.CreateFileOpenHandle(FileMode mode, FileShare share, FileOptions options)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.OpenRead(String path)
   at SftpService.UploadFileTransc(String localFilePath, String filename, String userId, DateTime dateTrans) in E:\project\Booking\BE\App.BookingOnline.Service\Service\Common\SftpService.cs:line 103
2023-02-24 17:21:04.931 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T17:21:03.8891250+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T17:21:04.1677780+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T17:21:04.4097340+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T17:21:04.6761063+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];"
2023-02-24 17:21:04.932 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:bd879ba6-f076-4225-8ddd-c3f31a7651c6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:bd879ba6-f076-4225-8ddd-c3f31a7651c6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 17:21:04.932 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 17:21:04.933 +07:00 [Error] (App.BookingOnline.Data.Repositories.BookingRepository.MoveNext)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at App.Core.Repositories.BaseRepository`1.AddAsync(TEntity entity) in E:\project\Booking\BE\App.Core\Repositories\BaseRepository.cs:line 54
   at App.BookingOnline.Data.Repositories.TransactionRepository.SaveFtpTransJobHistory(FtpTransJobHistory model) in E:\project\Booking\BE\App.BookingOnline.Data\Repositories\Booking\TransactionRepository.cs:line 916
2023-02-24 17:21:04.933 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) Email out: ***>> 1.Update trạng thái log
2023-02-24 17:21:04.933 +07:00 [Information] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) [{"Date":"2023-02-20T00:00:00","Status":"sent","Id":"e2425b82-f7bf-4c17-b5cd-1d8abe61b75e"},{"Date":"2023-02-18T00:00:00","Status":"sent","Id":"67ff9e89-b616-4f95-b620-68c5b70f4a39"},{"Date":"2023-02-19T00:00:00","Status":"sent","Id":"14b44c5c-bc22-4693-857a-81d4def7d86f"},{"Date":"2023-02-17T00:00:00","Status":"sent","Id":"3edc7ae2-d92e-40ef-a0ef-903c74a2d565"},{"Date":"2023-02-23T00:00:00","Status":"sent","Id":"8896d488-46cf-4d42-94cb-bfed66e3f7cc"},{"Date":"2023-02-16T00:00:00","Status":"sent","Id":"b5d0e8b6-86ff-4390-a543-f4ceaef5a0da"}]
2023-02-24 17:21:04.935 +07:00 [Warning] (Microsoft.EntityFrameworkCore.Database.Transaction.) Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(RelationalEventId.SavepointsDisabledBecauseOfMARS))'.
2023-02-24 17:21:04.942 +07:00 [Error] (Microsoft.EntityFrameworkCore.Database.Command.) Failed executing DbCommand ("6"ms) [Parameters=["@p0=NULL (Size = 250), @p1='2023-02-17T00:00:00.0000000' (DbType = DateTime), @p2='2023-02-24T17:21:03.8891250+07:00' (DbType = DateTime), @p3='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx'.' (Size = 4000), @p4='OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 500), @p5='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230217.xlsx' (Nullable = false) (Size = 3000), @p6='True', @p7='False', @p8='False', @p9='True', @p10='brg' (Nullable = false) (Size = 500), @p11=NULL (Nullable = false) (Size = 50), @p12=NULL (DbType = DateTime2), @p13=NULL (Size = 250), @p14=NULL (Size = 100), @p15=NULL (Size = 250), @p16='2023-02-19T00:00:00.0000000' (DbType = DateTime), @p17='2023-02-24T17:21:04.1677780+07:00' (DbType = DateTime), @p18='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx'.' (Size = 4000), @p19='OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 500), @p20='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230219.xlsx' (Nullable = false) (Size = 3000), @p21='True', @p22='False', @p23='False', @p24='True', @p25='brg' (Nullable = false) (Size = 500), @p26=NULL (Nullable = false) (Size = 50), @p27=NULL (DbType = DateTime2), @p28=NULL (Size = 250), @p29=NULL (Size = 100), @p30=NULL (Size = 250), @p31='2023-02-20T00:00:00.0000000' (DbType = DateTime), @p32='2023-02-24T17:21:04.4097340+07:00' (DbType = DateTime), @p33='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx'.' (Size = 4000), @p34='OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 500), @p35='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230220.xlsx' (Nullable = false) (Size = 3000), @p36='True', @p37='False', @p38='False', @p39='True', @p40='brg' (Nullable = false) (Size = 500), @p41=NULL (Nullable = false) (Size = 50), @p42=NULL (DbType = DateTime2), @p43=NULL (Size = 250), @p44=NULL (Size = 100), @p45=NULL (Size = 250), @p46='2023-02-23T00:00:00.0000000' (DbType = DateTime), @p47='2023-02-24T17:21:04.6761063+07:00' (DbType = DateTime), @p48='Could not find file 'E:\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx'.' (Size = 4000), @p49='OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 500), @p50='\Doi_xoat\Files\Out\Seabank\2023\02\OUT_SB_BRG_20230223.xlsx' (Nullable = false) (Size = 3000), @p51='True', @p52='False', @p53='False', @p54='True', @p55='brg' (Nullable = false) (Size = 500), @p56=NULL (Nullable = false) (Size = 50), @p57=NULL (DbType = DateTime2), @p58=NULL (Size = 250), @p59=NULL (Size = 100), @p62='14b44c5c-bc22-4693-857a-81d4def7d86f', @p60='sent' (Nullable = false) (Size = 100), @p61='2023-02-24T17:21:04.9331830+07:00' (Nullable = true), @p65='3edc7ae2-d92e-40ef-a0ef-903c74a2d565', @p63='sent' (Nullable = false) (Size = 100), @p64='2023-02-24T17:21:04.9331833+07:00' (Nullable = true), @p68='67ff9e89-b616-4f95-b620-68c5b70f4a39', @p66='sent' (Nullable = false) (Size = 100), @p67='2023-02-24T17:21:04.9331826+07:00' (Nullable = true), @p71='8896d488-46cf-4d42-94cb-bfed66e3f7cc', @p69='sent' (Nullable = false) (Size = 100), @p70='2023-02-24T17:21:04.9331835+07:00' (Nullable = true), @p74='b5d0e8b6-86ff-4390-a543-f4ceaef5a0da', @p72='sent' (Nullable = false) (Size = 100), @p73='2023-02-24T17:21:04.9331838+07:00' (Nullable = true), @p81='e2425b82-f7bf-4c17-b5cd-1d8abe61b75e', @p75='2023-02-21T14:31:21.6236083', @p76='system' (Nullable = false) (Size = 500), @p77='2023-02-20T00:00:00.0000000', @p78='sent' (Nullable = false) (Size = 100), @p79='2023-02-24T17:21:04.9351715+07:00' (Nullable = true), @p80=NULL (Size = 500)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] uniqueidentifier, [_Position] [int]);
MERGE [J_FtpTransJobHistory] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, 0),
(@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 1),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedUser], [DateId], [DateRun], [DescriptionError], [FileName], [FilePath], [IsActive], [IsFtpFile], [IsInsertData], [IsReadFile], [SeabankFilePath], [Status], [UpdatedDate], [UpdatedUser], [UserId])
VALUES (i.[CreatedUser], i.[DateId], i.[DateRun], i.[DescriptionError], i.[FileName], i.[FilePath], i.[IsActive], i.[IsFtpFile], i.[IsInsertData], i.[IsReadFile], i.[SeabankFilePath], i.[Status], i.[UpdatedDate], i.[UpdatedUser], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id], [t].[CreatedDate] FROM [J_FtpTransJobHistory] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [LogDateFileOut] SET [Status] = @p60, [UpdatedDate] = @p61
WHERE [Id] = @p62;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p63, [UpdatedDate] = @p64
WHERE [Id] = @p65;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p66, [UpdatedDate] = @p67
WHERE [Id] = @p68;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p69, [UpdatedDate] = @p70
WHERE [Id] = @p71;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [Status] = @p72, [UpdatedDate] = @p73
WHERE [Id] = @p74;
SELECT @@ROWCOUNT;

UPDATE [LogDateFileOut] SET [CreatedDate] = @p75, [CreatedUser] = @p76, [Date] = @p77, [Status] = @p78, [UpdatedDate] = @p79, [UpdatedUser] = @p80
WHERE [Id] = @p81;
SELECT @@ROWCOUNT;"
2023-02-24 17:21:04.942 +07:00 [Error] (Microsoft.EntityFrameworkCore.Update.) An exception occurred in the database while saving changes for context type '"App.BookingOnline.Data.BookingOnlineDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:bd879ba6-f076-4225-8ddd-c3f31a7651c6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Status', table 'BO_GOLF1.dbo.J_FtpTransJobHistory'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:bd879ba6-f076-4225-8ddd-c3f31a7651c6
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-24 17:21:04.944 +07:00 [Error] (App.BookingOnline.Data.Repositories.LogDateFileOutRepository.App.BookingOnline.Data.Repositories.LogDateFileOutRepository) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 17:21:04.944 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 17:21:04.944 +07:00 [Error] (App.BookingOnline.Service.TransactionService.App.BookingOnline.Service.TransactionService+<PreSendEmailFileOut>d__48) An error occurred while updating the entries. See the inner exception for details.
2023-02-24 17:21:05.195 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:21:35.218 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:22:05.235 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:22:35.254 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:23:05.280 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:23:35.324 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:24:05.348 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:24:09.969 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 17:24:35.362 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:25:05.388 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:25:35.413 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:26:05.438 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:26:35.457 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:27:05.482 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:27:35.497 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:28:05.521 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:28:35.544 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:29:05.567 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:29:10.016 +07:00 [Debug] (Hangfire.SqlServer.CountersAggregator.) Aggregating records in 'Counter' table...
2023-02-24 17:29:35.586 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:30:05.612 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
2023-02-24 17:30:35.636 +07:00 [Debug] (Hangfire.Server.ServerHeartbeatProcess.) Server hoangnt:16396:e7fb5af7 heartbeat successfully sent
